{
	"$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
    "name": "Expresso",
    "foldingStartMarker": "^\\s*/\\*|^(?![^{]*?//|[^{]*?/\\*(?!.*?\\*/.*?\\{)).*?\\{\\s*($|//|/\\*(?!.*?\\*/.*\\S))",
    "foldingStopMarker": "^\\s*\\*/|^\\s*\\}",
    "fileTypes": [
        "exs"
    ],
    "uuid": "F0FD0FAA-A6A3-11E3-A1BD-A73DC654913E",
	"patterns": [
        {
            "begin": "/\\*",
            "captures": {
                "0" : {
                    "name" : "punctuation.definition.comment.multi.expresso"
                }
            },
            "end": "\\*/",
            "name" : "comment.block.expresso"
        },
        {
            "begin": "//",
            "captures": {
                "0" : {
                    "name" : "punctuation.definition.comment.line.expresso"
                }
            },
            "end": "\\n$",
            "name" : "comment.line.double-slash.expresso"
        },
        {
            "begin": "^(import)\\s+([\\w0-9_]+)(?:::{?(?:,?([\\w0-9_]+))+}?)?",
            "beginCaptures": {
                "1" : {
                    "name" : "keyword.other.import.expresso"
                },
                "2" : {
                    "name" : "entity.name.type.expresso"
                },
                "3" : {
                    "name" : "entity.name.type.expresso"
                }
            },
            "end" : "}?;$",
            "patterns": [
                {
                    "begin" : "\\.{?",
                    "end" : "}?\\s+(?=from|as)",
                    "patterns": [
                        {
                            "match": "([\\w0-9_]+),?",
                            "captures": {
                                "1" : {
                                    "name" : "entity.name.type.expresso"
                                }
                            }
                        }
                    ]
                },
                {
                    "match": "(from) (\"[^\"]+\")\\s+(?=as)",
                    "captures": {
                        "1" : {
                            "name" : "keyword.other.from.expresso"
                        },
                        "2" : {
                            "name" : "string.quoted.double.expresso"
                        }
                    }
                },
                {
                    "begin": "(as) {?",
                    "beginCaptures": {
                        "1" : {
                            "name" : "keyword.other.as.expresso"
                        }
                    },
                    "end": "(?=}?;$)",
                    "patterns": [
                        {
                            "match": "([\\w0-9_]+),?",
                            "captures": {
                                "1" : {
                                    "name" : "entity.name.type.expresso"
                                }
                            }
                        }
                    ]
                }
            ],
            "name" : "meta.statement.import.expresso"
        },
        {
            "match" : "^(module)\\s+(.+?);$",
            "captures" : {
                "1" : {
                    "name" : "keyword.other.module.expresso"
                },
                "2" : {
                    "name" : "entity.name.type.package.expresso"
                }
            },
            "name" : "meta.keyword.module.expresso",
            "comment" : "Match on module definition statements"
        },
        {
            "begin": "^\\s*(throw)\\s+(.+?)({)",
            "beginCaptures": {
                "1" : {
                    "name" : "keyword.control.throw.expresso"
                },
                "2" : {
                    "name" : "entity.name.type.expresso"
                },
                "3" : {
                    "name" : "punctuation.definition.lcurlybrace.expresso"
                }
            },
            "end": "(});",
            "endCaptures": {
                "1" : {
                    "name" : "punctuation.definition.rcurlybrace.expresso"
                }
            },
            "patterns": [
                {
                    "match": "([\\w_0-9]+)",
                    "captures": {
                        "1" : {
                            "name" : "variable.parameter.expresso"
                        }
                    }
                },
                {
                    "include": "#stringLiterals"
                },
                {
                    "include" : "#numberLiteral",
                    "name" : "constant.numeric.expresso"
                },
                {
                    "include" : "#simpleFunctionCall",
                    "name" : "meta.function.call.expresso"
                }
            ]
        },
        {
            "begin": "(let|var)\\s+",
            "beginCaptures": {
                "1" : {
                    "name" : "keyword.other.expresso"
                }
            },
            "end": "(;)$",
            "endCaptures": {
                "1" : {
                    "name" : "punctuation.definition.semicolon.expresso"
                }
            },
            "patterns": [
                {
                    "match": "(,?)\\s*([\\w0-9_]+)\\s+(?:\\(-\\s+([\\w0-9_]+)\\s+)?(=)\\s+",
                    "captures": {
                        "1" : {
                            "name" : "punctuation.defitnion.comma.expresso"
                        },
                        "2" : {
                            "name" : "variable.name.expresso"
                        },
                        "3" : {
                            "name" : "entity.name.class.expresso"
                        },
                        "4" : {
                            "name" : "punctuation.defitnion.equal.expresso"
                        }
                    }
                },
                {
                    "include": "#numberLiteral",
                    "name" : "constant.numeric.expresso"
                },
                {
                    "include": "#stringLiterals"
                },
                {
                    "include": "#keywordVariables",
                    "name" : "variable.language.expresso"
                },
                {
                    "include": "#simpleFunctionCall",
                    "name" : "meta.function.call.expresso"
                }
            ]
        },
        {
            "begin": "^\\s*(export)?\\s*(class)\\s+([\\w0-9_]+)\\s*(?:(:)\\s+)?",
            "beginCaptures": {
                "1" : {
                    "name" : "keyword.other.export.expresso"
                },
                "2" : {
                    "name" : "keyword.other.class.expresso"
                },
                "3" : {
                    "name" : "entity.name.class.expresso"
                },
                "4" : {
                    "name" : "punctuation.definition.colon.expresso"
                }
            },
            "end": "\\n?\\s*({)",
            "endCaptures": {
                "1" : {
                    "name" : "punctuation.defitinion.curly-brackets.expresso"
                }
            },
            "patterns": [
                {
                    "match": "(,?)\\s*([\\w0-9_]+)",
                    "captures": {
                        "1" : {
                            "name" : "punctuation.definition.comma.expresso"
                        },
                        "2" : {
                            "name" : "entity.name.class.expresso"
                        }
                    }
                }
            ]
        },
        {
            "begin": "(#\\[)",
            "beginCaptures": {
                "1": {
                    "name" : "punctuation.definition.sharp-lbracket.expresso"
                }
            },
            "end": "(])",
            "endCaptures": {
                "1": {
                    "name" : "punctuation.definition.rbracket.expresso"
                }
            },
            "patterns": [
                {
                    "begin": "([\\w_0-9]+)({)",
                    "beginCaptures": {
                        "1": {
                            "name" : "entity.name.class.expresso"
                        },
                        "2" : {
                            "name" : "punctuation.definition.lcurlybrace.expresso"
                        }
                    },
                    "end": "(})",
                    "endCaptures": {
                        "1" : {
                            "name" : "punctuation.definition.rcurlybrace.expresso"
                        }
                    },
                    "patterns": [
                        {
                            "match": "([\\w_0-9]+)(:)",
                            "captures": {
                                "1" : {
                                    "name" : "variable.other.expresso"
                                },
                                "2" : {
                                    "name" : "punctuation.definition.colon.expresso"
                                }
                            }
                        },
                        {
                            "include": "#stringLiterals"
                        },
                        {
                            "include": "#numberLiteral",
                            "name": "constant.numeric.expresso"
                        }
                    ]
                }
            ]
        },
        {
            "include": "#stringLiterals"
        },
        {
            "include": "#numberLiteral",
            "name": "constant.numeric.expresso"
        },
        {
            "include": "#simpleFunctionCall",
            "name": "meta.function.call.expresso"
        },
        {
            "match" : "\\b(true|false|null)\\b",
            "name" : "constant.language.expresso"
        },
        {
            "match" : "\\b(if|else|for|while|return|continue|break|match|yield)\\b",
            "name" : "keyword.control.expresso"
        },
        {
            "match" : "\\b(override|as)\\b",
            "name" : "keyword.operator.expresso"
        },
        {
            "include": "#keywordVariables",
            "name" : "variable.language.expresso"
        },
        {
            "match" : "\\b(import|module|def|in|from|let|var)\\b",
            "name" : "keyword.other.expresso"
        },
        {
            "match" : "\\b(internal|public|protected|private|static|abstract|override|export|readonly)\\b",
            "name" : "storage.modifier.expresso"
        }
    ],
    "repository" : {
        "classInheritance" : {
            "patterns" : [
                {
                    "begin" : ":",
                    "end" : "(?={)",
                    "patterns" : [
                        {
                            "match" : "\\s*,?([A-Za-z_]\\w*)\\b",
                            "captures" : {
                                "1" : {
                                    "name" : "storage.type.expresso"
                                }
                            }
                        }
                    ]
                }
            ]
        },
        "statementRemainder" : {
            "patterns" : [
                {
                    "begin" : "\\(",
                    "end" : "(?=\\))",
                    "name" : "meta.definition.param-list.expresso",
                    "patterns" : [
                        {
                            "include" : "#builtinTypes"
                        }
                    ]
                }
            ]
        },
        "stringLiterals" : {
            "patterns": [
                {
                    "begin": "\"",
                    "end": "\"",
                    "patterns" : [
                        {
                            "match": "\\[artnv]",
                            "name" : "constant.character.escape.expresso"
                        },
                        {
                            "begin": "(\\$\\{)",
                            "beginCaptures": {
                                "1" : {
                                    "name" : "punctuation.definition.template-expression.begin.expresso"
                                }
                            },
                            "end": "(})",
                            "endCaptures": {
                                "1" : {
                                    "name" : "punctuation.definition.template-expression.end.expresso"
                                }
                            },
                            "name" : "meta.expression.expresso",
                            "patterns": [
                                {
                                    "include" : "#stringLiterals"
                                },
                                {
                                    "include": "#numberLiteral",
                                    "name" : "constant.numeric.expresso"
                                },
                                {
                                    "include": "simpleFunctionCall",
                                    "name" : "meta.function.call.expresso"
                                }
                            ]
                        },
                        {
                            "match": "\\$\\$",
                            "name" : "constant.character.expresso"
                        }
                    ],
                    "name" : "string.quoted.double.expresso"
                },
                {
                    "begin" : "(r[#]*)(\")",
                    "beginCaptures" : {
                        "1" : {
                            "name" : "punctuation.definition.string.prefix.literal.expresso"
                        },
                        "2" : {
                            "name" : "punctuation.definition.string.open.double-quote.expresso"
                        }
                    },
                    "end" : "(\")([#]*)",
                    "endCaptures" : {
                        "0" : {
                            "name" : "punctuation.definition.string.end.expresso"
                        },
                        "1" : {
                            "name" : "punctuation.definition.string.close.double-quote.expresso"
                        },
                        "2" : {
                            "name" : "punctuation.definition.string.postfix.literal.expresso"
                        }
                    },
                    "name" : "string.quoted.double.raw.expresso",
                    "patterns" : [
                        {
                            "match" : "\"",
                            "name" : "constant.character.double-quote.expresso"
                        }
                    ]
                },
                {
                    "begin" : "'",
                    "end" : "'",
                    "name" : "string.quoted.single.expresso",
                    "patterns" : [
                        {
                            "match" : "\\[atrnv]",
                            "name" : "constant.character.escape.expresso"
                        }
                    ]
                }
            ]
        },
        "numberLitral" : {
           "patterns" : [{
                "match" : "\\b((0(x|X)[0-9a-fA-F]*)|(([0-9]+\\.?[0-9]*)|(\\.[0-9]+))((e|E)(\\+|-)?[0-9]+)?)(L|l)?\\b",
                "name" : "constant.numeric.expresso"
            }]
        },
        "keywordVariables" : {
            "patterns": [{
                "match": "\\b(self|super)\\b",
                "name" : "variable.language.expresso"
            }]
        },
        "simpleFunctionCall" : {
            "patterns": [
                {
                    "begin": "([\\w0-9_]+)(\\()\\s*",
                    "beginCaptures": {
                        "1" : {
                            "name" : "entity.name.function.expresso"
                        },
                        "2" : {
                            "name" : "punctuation.definition.open-parenthesis.expresso"
                        }
                    },
                    "end": "\\s*(\\))",
                    "endCaptures": {
                        "1" : {
                            "name" : "punctuation.definition.close-parenthesis.expresso"
                        }
                    },
                    "patterns": [
                        {
                            "include": "#stringLiterals"
                        },
                        {
                            "include": "#numberLiteral",
                            "name" : "constant.numeric.expresso"
                        },
                        {
                            "include": "#keywordVariables",
                            "name" : "variable.language.expresso"
                        },
                        {
                            "include": "#simpleFunctionCall",
                            "name" : "meta.function.call.expresso"
                        }
                    ]
                }
            ]
        },
        "builtinTypes": {
            "patterns": [
                {
                    "match" : "\\b(bool|byte|float|double|int|uint|bigint|vector|dictionary|tuple|intseq|char|string|array|slice|function|void|class|interface)\\b",
                    "name" : "keyword.other.expresso"
                }
            ]
        }
    },
	"scopeName": "source.expresso"
}